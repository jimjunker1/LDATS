<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prepare the inputs for the ptMCMC algorithm estimation of 
  change points — prep_ptMCMC_inputs • LDATS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Prepare the inputs for the ptMCMC algorithm estimation of 
  change points — prep_ptMCMC_inputs" />
<meta property="og:description" content="Package the static inputs (controls and data structures) used
  by the ptMCMC algorithm in the context of estimating change points. 
   
  This function was designed to work within TS and 
  specifically est_changepoints. It is still hardcoded to do
  so, but has the capacity to be generalized to work with any estimation
  via ptMCMC with additional coding work." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LDATS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rodents-example.html">Rodents example</a>
    </li>
    <li>
      <a href="../articles/paper-comparison.html">Comparison to Christensen et al.</a>
    </li>
    <li>
      <a href="../articles/LDATS_codebase.html">LDATS codebase</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/weecology">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/weecology">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare the inputs for the ptMCMC algorithm estimation of 
  change points</h1>
    <small class="dont-index">Source: <a href='https://github.com/weecology/LDATS/blob/master/R/ptMCMC.R'><code>R/ptMCMC.R</code></a></small>
    <div class="hidden name"><code>prep_ptMCMC_inputs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Package the static inputs (controls and data structures) used
  by the ptMCMC algorithm in the context of estimating change points. 
  <br /> <br />
  This function was designed to work within <code><a href='TS.html'>TS</a></code> and 
  specifically <code><a href='est_changepoints.html'>est_changepoints</a></code>. It is still hardcoded to do
  so, but has the capacity to be generalized to work with any estimation
  via ptMCMC with additional coding work.</p>
    </div>

    <pre class="usage"><span class='fu'>prep_ptMCMC_inputs</span>(<span class='no'>data</span>, <span class='no'>formula</span>, <span class='no'>nchangepoints</span>, <span class='no'>timename</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>())</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Class <code>data.frame</code> object including [1] the time variable
(indicated in <code>control</code>), [2] the predictor variables (required by
<code>formula</code>) and [3], the multinomial response variable (indicated
in <code>formula</code>).</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p><code>formula</code> describing the continuous change. Any 
predictor variable included must also be a column in the
<code>data</code>.  Any (multinomial) response variable must also be a set of
columns in <code>data</code>.</p></td>
    </tr>
    <tr>
      <th>nchangepoints</th>
      <td><p>Integer corresponding to the number of 
change points to include in the model. 0 is a valid input (corresponding
to no change points, so a singular time series model), and the current 
implementation can reasonably include up to 6 change points. The 
number of change points is used to dictate the segmentation of the data  
for each continuous model and each LDA model.</p></td>
    </tr>
    <tr>
      <th>timename</th>
      <td><p><code>character</code> element indicating the time variable
used in the time series. Defaults to <code>"time"</code>. The variable must be
integer-conformable or a <code>Date</code>. If the variable named
is a <code>Date</code>, the input is converted to an integer, resulting in the
timestep being 1 day, which is often not desired behavior.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>Optional class <code>numeric</code> vector of weights for each 
document. Defaults to <code>NULL</code>, translating to an equal weight for
each document. When using <code>multinom_TS</code> in a standard LDATS 
analysis, it is advisable to weight the documents by their total size,
as the result of <code><a href='https://rdrr.io/pkg/topicmodels/man/lda.html'>LDA</a></code> is a matrix of 
proportions, which does not account for size differences among documents.
For most models, a scaling of the weights (so that the average is 1) is
most appropriate, and this is accomplished using 
<code><a href='document_weights.html'>document_weights</a></code>.</p></td>
    </tr>
    <tr>
      <th>control</th>
      <td><p>A <code>list</code> of parameters to control the fitting of the
Time Series model including the parallel tempering Markov Chain 
Monte Carlo (ptMCMC) controls. Values not input assume defaults set by 
<code><a href='TS_control.html'>TS_control</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Class <code>ptMCMC_inputs</code> <code>list</code>, containing the static 
  inputs for use within the ptMCMC algorithm for estimating change points.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># \donttest{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>rodents</span>)
  <span class='no'>document_term_table</span> <span class='kw'>&lt;-</span> <span class='no'>rodents</span>$<span class='no'>document_term_table</span>
  <span class='no'>document_covariate_table</span> <span class='kw'>&lt;-</span> <span class='no'>rodents</span>$<span class='no'>document_covariate_table</span>
  <span class='no'>LDA_models</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='LDA_set.html'>LDA_set</a></span>(<span class='no'>document_term_table</span>, <span class='kw'>topics</span> <span class='kw'>=</span> <span class='fl'>2</span>)<span class='kw'>[[</span><span class='fl'>1</span>]]
  <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='no'>document_covariate_table</span>
  <span class='no'>data</span>$<span class='no'>gamma</span> <span class='kw'>&lt;-</span> <span class='no'>LDA_models</span>@<span class='kw'>gamma</span>
  <span class='no'>weights</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='document_weights.html'>document_weights</a></span>(<span class='no'>document_term_table</span>)
  <span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='no'>data</span>[<span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span>(<span class='no'>data</span>[,<span class='st'>"newmoon"</span>]), ]
  <span class='no'>saves</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='prep_saves.html'>prep_saves</a></span>(<span class='fl'>1</span>, <span class='fu'><a href='TS_control.html'>TS_control</a></span>())
  <span class='no'>inputs</span> <span class='kw'>&lt;-</span> <span class='fu'>prep_ptMCMC_inputs</span>(<span class='no'>data</span>, <span class='no'>gamma</span> ~ <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='st'>"newmoon"</span>, <span class='no'>weights</span>,
                               <span class='fu'><a href='TS_control.html'>TS_control</a></span>())
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Juniper L. Simonis, Erica M. Christensen, David J. Harris, Renata M. Diaz, Hao Ye, Ethan P. White, S.K. Morgan Ernest.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


